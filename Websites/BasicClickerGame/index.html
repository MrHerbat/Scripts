<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Clicker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
            <h1>Basic Clicker Website</h1>
        <section id="options">
            <span id="saveProgress" style="visibility: none;"></span> <br>
            <button onclick="saveGame()">Save the game!</button>
            <button onclick="resetGame()">Reset your progress!</button>
        </section>
        
    </header>
    <main>
        <section id="upgrades">
            <h3>Upgrades!</h3>
            <nav>
                <button onclick="showUpgrades(0)" id="allUp" disabled>All</button>
                <button onclick="showUpgrades(1)" id="btnUp">Button</button>
                <button onclick="showUpgrades(2)" id="autoUp">Automation</button>
            </nav>
        </section>
        <section id="mainScreen">
            <h3>Points = <span id="points">0</span></h3>
            <h4>pt/s = <span id="ptS">0</span></h4>
            <button id="clickButton">Click!</button>
        </section>
    </main>
    <script>
        let pointCount = 0
        let pointGain = 1

        const pointText = document.getElementById("points");
        const clickerButton = document.getElementById("clickButton");
        const upgradesContainer = document.getElementById("upgrades");

        const upgradesList = [
            {name: "Strong Button", addGain: 1, cost: 10, upgradeAmount: 0, category: 'button'},
            {name: "Stronger Button!", addGain: 5, cost: 40, upgradeAmount: 0, category: 'button'}
        ];

        clickerButton.addEventListener('click', () =>{
            pointCount+=pointGain;
            pointText.textContent = pointCount;
        });

        function loadGame(){
            const saved = localStorage.getItem("basicClickerGameSave");
            if(saved){
                const gameState = JSON.parse(saved);
                pointCount = gameState.pointCount || 0;
                pointGain = gameState.pointGain || 1;
                upgradesList.forEach((upgrade,index) => {
                    if(gameState.upgradesList && gameState.upgradesList[index]) {
                        upgradesList[index].cost = gameState.upgradesList[index].cost;
                        upgradesList[index].upgradeAmount = gameState.upgradesList[index].upgradeAmount;
                    }
                })
                document.getElementById("saveProgress").style.visibility = 'visible';
                document.getElementById("saveProgress").textContent = "Save Loaded!";
                setTimeout(() => {
                    document.getElementById("saveProgress").style.visibility = 'hidden';
                }, 2500);
            }
        }

        function saveGame() {
            const gameState = {
                pointCount,
                pointGain,
                upgradesList
            }; 
            localStorage.setItem("basicClickerGameSave",JSON.stringify(gameState));
            document.getElementById("saveProgress").style.visibility = 'visible';
                document.getElementById("saveProgress").textContent = "Game Saved!";
                setTimeout(() => {
                    document.getElementById("saveProgress").style.visibility = 'hidden';
                }, 2500);
        }

        function resetGame(params) {
            if (confirm("Are you sure you want to reset?")) {
                localStorage.removeItem('basicClickerGameSave');
                location.reload();
            }
        }

        function createUpgradeButtons() {
            upgradesList.forEach((upgrade, index) => {
                const block = document.createElement('div');
                const btn = document.createElement('button');
                block.classList.add('upgrade');
                block.classList.add(`${upgrade.category}`);
                btn.id = `upgrade-${index}`;
                btn.innerHTML = `<i>Cost: <span id="cost-${index}">${upgrade.cost}</i></span>`;
                block.innerHTML = `<img src=''><b>${upgrade.name}</b>(<span id='upAmount-${index}'>${upgrade.upgradeAmount}</span>) <i> category - ${upgrade.category}<i></br>Point Gain(+${upgrade.addGain}) -`;
                btn.addEventListener('click', () => buyUpgrade(index));
                block.appendChild(btn);
                upgradesContainer.appendChild(block);
            });
        }

    function buyUpgrade(index) {
        const upgrade = upgradesList[index];
        if (pointCount >= upgrade.cost) {
            pointCount -= upgrade.cost;
            pointGain += upgrade.addGain;
            upgrade.upgradeAmount+=1;
            upgrade.cost = Math.floor(upgrade.cost * (1.1 + ((index+1)/2)));
            document.getElementById(`cost-${index}`).textContent = upgrade.cost;
            document.getElementById(`upAmount-${index}`).textContent = upgrade.upgradeAmount;
            pointText.textContent = pointCount;
        }
    }

    function showUpgrades(x) {
        switch (x) {
            case 0:
                document.getElementById('allUp').disabled = true;
                document.getElementById('btnUp').disabled = false;
                document.getElementById('autoUp').disabled = false;
                [].forEach.call(document.querySelectorAll(".button"), function (el) {
                    el.style.visibility = 'visible';
                });
                [].forEach.call(document.querySelectorAll(".automation"), function (el) {
                    el.style.visibility = 'visible';
                });
            break;
            case 1:
                document.getElementById('allUp').disabled = false;
                document.getElementById('btnUp').disabled = true;
                document.getElementById('autoUp').disabled = false;
                [].forEach.call(document.querySelectorAll(".button"), function (el) {
                    el.style.visibility = 'visible';
                });
                [].forEach.call(document.querySelectorAll(".automation"), function (el) {
                    el.style.visibility = 'hidden';
                });
            break;
            case 2:
                document.getElementById('allUp').disabled = false;
                document.getElementById('btnUp').disabled = false;
                document.getElementById('autoUp').disabled = true;
                [].forEach.call(document.querySelectorAll(".button"), function (el) {
                    el.style.visibility = 'hidden';
                });
                [].forEach.call(document.querySelectorAll(".automation"), function (el) {
                    el.style.visibility = 'visible';
                });
            break;
            default:
                break;
        }
    }

    loadGame();
    createUpgradeButtons();
    pointText.textContent = pointCount;

    setInterval(saveGame, 30000);
    </script>
</body>
</html>